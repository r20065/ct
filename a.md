# Compact MPR Viewer 操作マニュアル

## 0.動作環境
windows11でのブラウザ（chrome,ege）で動作可能です。その他ブラウザは動作未確認。
本アプリケーションは1920p×1080pのモニタで表示させることを前提としている。

---

## 1. 概要
本アプリケーションは、ブラウザ上で動作するDICOM画像ビューアです。以下の主要機能を備えています。
* **MPR表示**: Axial（横断像）、Coronal（冠状断像）、Sagittal（矢状断像）の3断面を同時に表示。
* **インタラクティブ操作**: 断面の拡大、スライス移動、ウィンドウ値（WW/WL）の調整。
* **3Dボリュームレンダリング**: vtk.jsを利用した、GPU加速による立体表示。

---

## 2. 画面構成
画面は大きく2つのセクションに分かれています。

### 2.1 サイドバー（左側）
操作パネルが集約されています。
* **ファイル入力**: DICOMフォルダの読み込み。
* **情報パネル**: 画像サイズ、スライス厚、枚数の表示。
* **表示設定 (Display Settings)**: ウィンドウ幅(WW)・レベル(WL)の調整、参照線の表示切り替え。
* **スライス操作 (Slice Control)**: 各断面の表示位置をスライダで変更。

### 2.2 メインエリア（右側）
画像が表示されるエリアです。
* **上段 (view-group)**: 3つの断面図が横並びに表示されます。
* **下段 (box-3d)**: 3Dレンダリング結果が表示されます（スクロールで表示）。

---

## 3. 操作ガイド

### 3.1 データの読み込み
1. 「ファイルを選択」ボタンから、DICOMファイル群が含まれる**フォルダ**を選択します。
2. 読み込み後、自動的に各断面と3Dモデルが生成されます。

### 3.2 画像の調整
* **コントラスト・明るさ**: サイドバーの `WW` / `WL` スライダを動かすと、全断面に即座に反映されます。
* **断面の移動**: 各軸のスライダを動かすことで、目的の部位を探せます。
* **参照線の確認**: 画像上のカラー線は、他の断面が現在どこを切っているかを示しています。

### 3.3 ビューの拡大表示
1. 各断面のタイトル（「Axial」など）をクリックすると、その断面が大きく表示されます。
2. 再度タイトルをクリックすると、元の3分割画面に戻ります。

### 3.4 3D操作
* **回転**: 3Dエリア内をマウスで左ドラッグ。
* **ズーム**: マウスホイール（または右ドラッグ）。

---

## 4. ショートカット・Tips
* **参照線の非表示**: 観察の邪魔になる場合は「Show Reference Lines」のチェックを外してください。
* **3D表示への移動**: メインエリアを下にスクロールすることで、高精細なボリュームレンダリングを確認できます。

---

## 5. 技術スタック
* **レンダリングエンジン**: [vtk.js](https://kitware.github.io/vtk-js/)
* **DICOM解析**: cornerstone.js, dicom-parser
* **スタイリング**: CSS Flexbox